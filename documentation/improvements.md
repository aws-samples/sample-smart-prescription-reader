# Improvements

## Development and deployment

* **Exception handling:** All application function code needs to be reviewed to execute proper validation logic and
  exception handling. Not all cases were covered during prototype development.
* **Automated unit, integration and system tests:** In the prototype, some unit tests and manual tests were executed but
  they are by no means comprehensive. Automated test scripts are required to achieve higher code coverage and to ensure
  quality and robustness of the solution as it evolves from prototype to production.
* **Code repositories and pipelines:** Code repositories allow teams to collaborate and CI/CD pipelines allow frequent
  small improvements to be deployed.

## Operations

* **Monitoring:** The ability to properly monitor the system in production is crucial and the implemented code doesn't
  provide enough means to do so. Consider using both CloudWatch Logs and CloudWatch Metrics to have more visibility of
  all architecture components. For production, consider setting the log level to warning to reduce verbosity.

  Specifically, we recommend monitoring the following metrics:
    - **Lambda/Errors**: Excessive errors may indicate performance problems for a particular model.
      Look for `ModelResponseError` in the logs.
    - **Bedrock/InputTokens + Bedrock/CacheWriteInputTokens**: Input tokens consumed by the model.
    - **Bedrock/OutputTokens**: Output tokens generated by the model.
    - **Bedrock/CacheReadInputTokens**: Input tokens saved by reading from the prompt cache.

* **Auditing:** AWS CloudTrail can be used to implement detective controls. CloudTrail records AWS API calls for your
  account and delivers log files to you for auditing.
* **Tracing:** To help with the operations in the production environment, we recommend a tracing solution such as AWS
  X-Ray
* **VPC Flow Logs:** VPC Flow Logs capture network flow information for a VPC, subnet, or network interface and stores
  it in Amazon CloudWatch Logs and can help troubleshoot network issues.

## AI Model Flexibility

The prototype currently supports Anthropic Claude 3+ and Amazon Nova models. Extensibility for new models is built into
the system through the Amazon Bedrock Converse API.
This design allows for easy adaptation to new AI models or services as they become available or as customer needs
evolve.

## Adding Custom OCR to the Workflow

Textract is used to provide a baseline text transcription of the prescription, which can then be passed to the
subsequent AI models for extraction, evaluation, and correction. Once you have collected and corrected results from a
sufficient corpus of handwritten prescriptions, you can train a custom OCR model. This approach can potentially improve
accuracy, especially for handwritten images.
